<html id="app">
    <head>
        <title>Crossword Trainer</title>
        <script src='public/build.js'></script>
        <link rel='stylesheet' href='public/foundation.min.css' />
        <link rel='stylesheet' href='public/index.css' />
    </head>
    <body ng-controller="CrosswordCtrl as state">
        <br/>
        <br/>
        <div class="rainbow"></div>
        <div id="clues">
            <div class="clue-set">
                <h3>Across</h3>
                <div class="clue-set-item" ng-repeat="word in state.words.horizontal">
                    <div
                        ng-class="[
                            'clue', {
                                selected: state.ui.currentWord.id === word.id
                            }
                        ]"
                        ng-click="state.ui.handleClueClick.action(word.id)"
                    ><span class="clue-number">{{word.id}}.</span> {{word.clue}}</div>
                </div>
            </div>

            <div class="clue-set">
                <h3>Down</h3>
                <div class="clue-set-item" ng-repeat="word in state.words.vertical">
                    <div
                        ng-class="[
                            'clue', {
                                selected: state.ui.currentWord.id === word.id
                            }
                        ]"
                        ng-click="state.ui.handleClueClick.action(word.id)"
                    ><span class="clue-number">{{word.id}}.</span> {{word.clue}}</div>
                </div>
            </div>


        </div>
        <div id="board">
            <div
                ng-repeat="tile in state.crossword.collection"
                class="tile"
                ng-click="state.ui.handleTileClick.action(tile)"
                ng-class="{
                    nth: tile.x % state.crossword.width === 0,
                    'is-in-use': tile.isInUse,
                    'is-correct': tile.isFulfilled() && state.ui.submitGame.hasOccurred,
                    'is-incorrect': !tile.isFulfilled() && state.ui.submitGame.hasOccurred,
                    'belongs-to-current-word': tile.belongsToCurrentWord,
                }"
            >
                <div ng-if="tile.isInUse">
                    <input
                        type="text"
                        ng-model="tile.input"
                        ng-focus="state.ui.handleTileFocus(tile.words)"
                        focus-on="{{'tile-' + tile.x + tile.y}}"
                        ng-keyup="state.onKeypress($event, tile)"
                        placeholder="{{tile.placeholder}}"
                    />
                </div>
                <div
                    class="word-number"
                    ng-if="tile.isFirstInWord.length"
                >{{ tile.isFirstInWord[0] }}</div>
            </div>
            <h1 ng-if="state.crossword.words.isFulfilled()">Complete!</h1>
        </div>
        <br/>
        <br/>
        <div>
            <div
                class="button"
                ng-click="state.ui.showAllTiles.action()"
            >Solve the Board</div>

            <div
                class="button"
                ng-click="state.ui.submitGame.action()"
            >Submit</div>
        </div>
        <br/>
        <br/>
    </body>
</html>
